
{% extends "template.html" %}
    <!--=================================
 header -->
 {% block body %}
    <!--=================================
 intro bg -->
 <style>
  
    .home-testimonial{background-color: #231834;height: 380px}.home-testimonial-bottom{background-color: #f8f8f8;transition: background 0.3s, border 0.3s, border-radius 0.3s, box-shadow 0.3s;margin-top: 20px;margin-bottom: 0px;position: relative;height: 130px;top: 190px}.home-testimonial h3{color: var(--orange);font-size: 14px;font-weight: 500;text-transform: uppercase}.home-testimonial h2{color: white;font-size: 28px;font-weight: 700}.testimonial-inner{position: relative;top: -174px}.testimonial-pos{position: relative;top: 24px}.testimonial-inner .tour-desc{border-radius: 5px;padding: 40px}.color-grey-3{font-family: "Montserrat", Sans-serif;font-size: 14px;color: #6c83a2}.testimonial-inner img.tm-people{width: 60px;height: 60px;-webkit-border-radius: 50%;border-radius: 50%;-o-object-fit: cover;object-fit: cover;max-width: none}.link-name{font-family: "Montserrat", Sans-serif;font-size: 14px;color: #6c83a2}.link-position{font-family: "Montserrat", Sans-serif;font-size: 12px;color: #6c83a2}
</style>
<style>
    .blog-listing {
        padding-top: 30px;
        padding-bottom: 30px;
    }
    .gray-bg {
        background-color: #f5f5f5;
    }
    /* Blog 
    ---------------------*/
    .blog-grid {
    box-shadow: 0 0 30px rgba(31, 45, 61, 0.125);
    border-radius: 5px;
    overflow: hidden;
    background: #ffffff;
    margin-top: 15px;
    margin-bottom: 15px;
    }
  
    .blog-grid .blog-img .date {
        background: #fecc00;
    color: #ffffff;
    padding: 8px 15px;
    left: 10px;
    top: 10px;
    border-radius: 4px;
    }
    .blog-grid .blog-img .date span {
    font-size: 22px;
    display: block;
    line-height: 22px;
    font-weight: 700;
    }
    .blog-grid .blog-img .date label {
    font-size: 14px;
    margin: 0;
    }
    .blog-grid .blog-info {
    padding: 20px;
    }
    .blog-grid .blog-info h5 {
    font-size: 22px;
    font-weight: 700;
    margin: 0 0 10px;
    }
    .blog-grid .blog-info h5 a {
    color: #20247b;
    }
    .blog-grid .blog-info p {
    margin: 0;
    }
    .blog-grid .blog-info .btn-bar {
    margin-top: 20px;
    }


    /* Blog Sidebar
    -------------------*/
    .blog-aside .widget {
    box-shadow: 0 0 30px rgba(31, 45, 61, 0.125);
    border-radius: 5px;
    overflow: hidden;
    background: #ffffff;
    margin-top: 15px;
    margin-bottom: 15px;
    width: 100%;
    display: inline-block;
    vertical-align: top;
    }
    .blog-aside .widget-body {
    padding: 15px;
    }
    .blog-aside .widget-title {
    padding: 15px;
    border-bottom: 1px solid #eee;
    }
    .blog-aside .widget-title h3 {
    font-size: 20px;
    font-weight: 700;
    color: #fc5356;
    margin: 0;
    }
    .blog-aside .widget-author .media {
    margin-bottom: 15px;
    }
    .blog-aside .widget-author p {
    font-size: 16px;
    margin: 0;
    }
    .blog-aside .widget-author .avatar {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    overflow: hidden;
    }
    .blog-aside .widget-author h6 {
    font-weight: 600;
    color: #20247b;
    font-size: 22px;
    margin: 0;
    padding-left: 20px;
    }
    .blog-aside .post-aside {
    margin-bottom: 15px;
    }
    .blog-aside .post-aside .post-aside-title h5 {
    margin: 0;
    }
    .blog-aside .post-aside .post-aside-title a {
    font-size: 18px;
    color: #20247b;
    font-weight: 600;
    }
    .blog-aside .post-aside .post-aside-meta {
    padding-bottom: 10px;
    }
    .blog-aside .post-aside .post-aside-meta a {
    color: #6F8BA4;
    font-size: 12px;
    text-transform: uppercase;
    display: inline-block;
    margin-right: 10px;
    }
    .blog-aside .latest-post-aside + .latest-post-aside {
    border-top: 1px solid #eee;
    padding-top: 15px;
    margin-top: 15px;
    }
    .blog-aside .latest-post-aside .lpa-right {
    width: 90px;
    }
    .blog-aside .latest-post-aside .lpa-right img {
    border-radius: 3px;
    }
    .blog-aside .latest-post-aside .lpa-left {
    padding-right: 15px;
    }
    .blog-aside .latest-post-aside .lpa-title h5 {
    margin: 0;
    font-size: 15px;
    }
    .blog-aside .latest-post-aside .lpa-title a {
    color: #20247b;
    font-weight: 600;
    }
    .blog-aside .latest-post-aside .lpa-meta a {
    color: #6F8BA4;
    font-size: 12px;
    text-transform: uppercase;
    display: inline-block;
    margin-right: 10px;
    }

    .tag-cloud a {
    padding: 4px 15px;
    font-size: 13px;
    color: #ffffff;
    background: #20247b;
    border-radius: 3px;
    margin-right: 4px;
    margin-bottom: 4px;
    }
    .tag-cloud a:hover {
    background: #fc5356;
    }

    .blog-single {
    padding-top: 30px;
    padding-bottom: 30px;
    }

    .article {
    box-shadow: 0 0 30px rgba(31, 45, 61, 0.125);
    border-radius: 5px;
    overflow: hidden;
    background: #ffffff;
    padding: 15px;
    margin: 15px 0 30px;
    }
    .article .article-title {
    padding: 15px 0 20px;
    }
    .article .article-title h6 {
    font-size: 14px;
    font-weight: 700;
    margin-bottom: 20px;
    }
    .article .article-title h6 a {
    text-transform: uppercase;
    color: #fc5356;
    border-bottom: 1px solid #fc5356;
    }
    .article .article-title h2 {
    color: #20247b;
    font-weight: 600;
    }
    .article .article-title .media {
    padding-top: 15px;
    border-bottom: 1px dashed #ddd;
    padding-bottom: 20px;
    }
    .article .article-title .media .avatar {
    width: 45px;
    height: 45px;
    border-radius: 50%;
    overflow: hidden;
    }
    .article .article-title .media .media-body {
    padding-left: 8px;
    }
    .article .article-title .media .media-body label {
    font-weight: 600;
    color: #fc5356;
    margin: 0;
    }
    .article .article-title .media .media-body span {
    display: block;
    font-size: 12px;
    }
    .article .article-content h1,
    .article .article-content h2,
    .article .article-content h3,
    .article .article-content h4,
    .article .article-content h5,
    .article .article-content h6 {
    color: #20247b;
    font-weight: 600;
    margin-bottom: 15px;
    }
    .article .article-content blockquote {
    max-width: 600px;
    padding: 15px 0 30px 0;
    margin: 0;
    }
    .article .article-content blockquote p {
    font-size: 20px;
    font-weight: 500;
    color: #fc5356;
    margin: 0;
    }
    .article .article-content blockquote .blockquote-footer {
    color: #20247b;
    font-size: 16px;
    }
    .article .article-content blockquote .blockquote-footer cite {
    font-weight: 600;
    }
    .article .tag-cloud {
    padding-top: 10px;
    }

    .article-comment {
    box-shadow: 0 0 30px rgba(31, 45, 61, 0.125);
    border-radius: 5px;
    overflow: hidden;
    background: #ffffff;
    padding: 20px;
    }
    .article-comment h4 {
    color: #20247b;
    font-weight: 700;
    margin-bottom: 25px;
    font-size: 22px;
    }
    img {
        max-width: 100%;
    }
    img {
        vertical-align: middle;
        border-style: none;
    }

    /* Add this CSS to your stylesheet */
    .article-thumbnail {
        width: 100%; /* Set a fixed width for the image container */
        height: 200px; /* Set a fixed height for the image container */
        object-fit: cover; /* Make sure the image covers the container without stretching */
    }

    .article-name {
    display: block;
    height: 50px; /* Set a fixed height for the article name container */
    overflow: hidden; /* Hide overflowing text */
    text-overflow: ellipsis; /* Display an ellipsis (...) when text overflows */
    white-space: nowrap; /* Prevent wrapping to the next line */
    }
</style>
    <!--=================================
 intro bg -->

    <!--=================================
 Review -->
 <section>
    <ul class="nav nav-tabs tabs-link white mt-2 mb-4 justify-content-center"  id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="allReviews-tab" data-bs-toggle="tab" data-bs-target="#allReviews" type="button" role="tab" aria-controls="allReviews" aria-selected="true">All Coupons</button>
        </li>
        
        {% if request.user.is_superuser %}
            
        
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="form-tab" data-bs-toggle="tab" data-bs-target="#form" type="button" role="tab" aria-controls="form" aria-selected="false">Verify</button>
        </li>
        {% endif %}
        
    </ul>
</section>

 <section  class="tab-content" style="overflow-x: hidden;">
    <div class="tab-pane fade show active" id="allReviews" role="tabpanel" aria-labelledby="allReviews-tab">

        <div class="row d-flex justify-content-center">
        <div class="col-md-10 col-xl-8 text-center">
            <h1 class="mb-4" style="font-size:45px;font-weight:bold !important">All Available Coupons</h1>
          
        </div>
        </div>
        
        <div class="row align-items-start">
            <div class="col-lg-12 m-15px-tb">
                <div class="row container">
                    {% for coupon in coupons %}
                        <div class="col-sm-4">
                                <div class="blog-grid">
                                    <div class="blog-img">
                                        <div class="date" style="    display: flex;justify-content: space-between;">
                                            <span>{{ coupon.discount_percentage }} %</span>
                                            <span style="color:black">{{coupon.code}}</span>
                                        </div>
                                      
                                    </div>
                                    <div class="coupon-info">
                                        <span style="float: right;">Expire on:  <span style="color:red;font-size: 15px;">{{coupon.expiration_date}}</span></span>  
                                        <br>
                                        <h5>
                                            
                                            <a  class="coupon-name">{{coupon.description|safe}}</a></h5>
                                        
                                    </div>
                                </div>
                            

                        </div>
                        
                    {% endfor %}

                   

                </div>
            </div>

        </div>
    </div>


    <div class="tab-pane fade" id="form" role="tabpanel" aria-labelledby="form-tab">
        <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <div class="section-title text-center">
                            <div class="title-separator">
                                <i class="glyph-icon flaticon-food-27"></i>
                            </div>
                            <h2> <span class="text-orange">Enter </span> Email And Code to verify</h2>
                        </div>
                    </div>
                </div>
                
                <div class="row justify-content-center" id="reviewForm">
                    <div class="col-lg-10">
                        
                        {% if purchase_card %}
                            
                        <form action="{% url 'verify_coupon' %}" method= "POST" >
                            {% csrf_token %}
                            <div class="contact-form">
                                <div class="row">
                                    
                                    <div class="col-lg-6 col-md-4 col-sm-4">
                                        <div class="form-field">
                                            <i class="fa fa-code"></i>
                                            <input class="web" type="text" value="{{purchase_card.code}}" readonly placeholder="Gift voucher Code" name="coupon" required>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-4 col-sm-4">
                                        <div class="form-field">
                                            <i class="fa fa-envelope-o"></i>
                                            <input class="web" type="text" placeholder="Your Email" readonly value="{{purchase_card.receiver_email}}" name="email"required>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-4 col-sm-4">
                                        <div class="form-field">
                                            <i class="fa fa-money"></i>
                                            <input class="web" type="text" placeholder="Amount" readonly value="£ . {{purchase_card.amount}}" name="amount"required>
                                        </div>
                                    </div>
                                    
                                    <div class="col-lg-3 col-md-4 col-sm-4">
                                        <div class="form-field">
                                            <input type="checkbox" name='redeemed' {% if purchase_card.redeemed %}
                                            checked disabled
                                        {% endif %} style="  margin-right: 5px;  height: auto; width: auto;" required>
                                                <small>Redeemed</small>
                                        </div>
                                    </div>
                                    <div class="col-lg-3 col-md-4 col-sm-4">
                                        <div class="form-field">
                                            <input type="checkbox" name='expire'{% if purchase_card.expire  %}
                                            checked
                                        {% endif %} style="  margin-right: 5px;  height: auto; width: auto;" disabled required>
                                            <small>Expired </small>

                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-4 col-sm-4">
                                        <div class="form-field">
                                            <i class="fa fa-calendar"></i>
                                            <input class="web" type="text" placeholder="end date" readonly value="{{purchase_card.end_date | date:'d-m-Y'}}" name="amount"required>
                                        </div>
                                    </div>
                                    
                                </div>
                                
                                
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="form-submit mt-10 mb-30 text-center">
                                            <button  type="submit"  class="button uppercase"> Submit</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                        {% else %}
                        
                        <form action="{% url 'verify_coupon' %}" method= "GET" >
                            
                            <div class="contact-form">
                                <div class="row">
                                    
                                    <div class="col-lg-6 col-md-4 col-sm-4">
                                        <div class="form-field">
                                            <i class="fa fa-phone"></i>
                                            <input class="web" type="text" placeholder="Gift voucher Code" name="coupon" required>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-4 col-sm-4">
                                        <div class="form-field">
                                            <i class="fa fa-envelope-o"></i>
                                            <input class="web" type="text" placeholder="Your Email" name="email"required>
                                        </div>
                                    </div>
                                    
                                </div>
                                
                                
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="form-submit mt-10 mb-30 text-center">
                                            <button  type="submit"  class="button uppercase"> Submit</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                        {% endif %}
                    </div>
                </div>
            </div>
    </div>
</section>
    <!--=================================
 Review -->

<script>
    document.addEventListener('DOMContentLoaded', function () {
        var allReviewsTab = document.getElementById('allReviews-tab');
        var formTab = document.getElementById('form-tab');
        var allReviewsSection = document.getElementById('allReviews');
        var formSection = document.getElementById('form');

        // Show All Reviews Section by default
        allReviewsTab.classList.add('active');
        allReviewsSection.classList.add('show', 'active');

        // Check if the URL contains the anchor #form
        if (window.location.hash === '#form') {
            formTab.classList.add('active');
            allReviewsTab.classList.remove('active');

            formSection.classList.add('show', 'active');
            allReviewsSection.classList.remove('show', 'active');
        }

        // Toggle between All Reviews and Form Sections
        allReviewsTab.addEventListener('click', function () {
            allReviewsTab.classList.add('active');
            formTab.classList.remove('active');

            allReviewsSection.classList.add('show', 'active');
            formSection.classList.remove('show', 'active');
        });

        formTab.addEventListener('click', function () {
            formTab.classList.add('active');
            allReviewsTab.classList.remove('active');

            formSection.classList.add('show', 'active');
            allReviewsSection.classList.remove('show', 'active');
        });
    });
</script>


 {% endblock body %}